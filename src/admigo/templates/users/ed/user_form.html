{{ define "title" }}{{ re "User" }}{{ end }}
{{ define "styles" }}
  <link rel="stylesheet" type="text/css" href="/static/css/elems/forms.css" />
  <link rel="stylesheet" type="text/css" href="/static/external/cropper/cropper.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/css/elems/se_list.css" />
{{ end }}
{{ define "content" }}
  {{ $mo := (index . "info").mo }}
  {{ $edit := (ge $mo.ID 0) }}
  {{ $all_error := $mo.GetError "all" }}
  <div id="form-container">
    <div class="form-header">
      {{ if $edit }}
        {{ label "edit_title" }}<span>{{ $mo.Name }}</span>
      {{ else }}
        {{ label "add_title" }}
      {{ end }}
    </div>
    <div id="form-tabs">
      <div class="form-tab act" data-tid="frm-sign">{{ label "sign" }}</div>
      <div class="form-tab" data-tid="frm-attrs">{{ label "attributes" }}</div>
      <div class="form-tab" data-tid="frm-thumb">{{ label "th" }}</div>
      <div class="form-tab" data-tid="frm-bim">{{ label "bim" }}</div>
      <div class="form-tab" data-tid="frm-roles">{{ label "roles" }}</div>
    </div>
    {{ $act := "" }}
    {{ if $edit }}
      {{ $act = (ro "user_edit_post" (printf "%d" $mo.ID)) }}
    {{ else }}
      {{ $act = ro "user_add_post" }}
    {{ end }}
    <form action="{{ $act }}" method="POST" enctype="multipart/form-data">
      {{ .csrfField }}
      <div class="form-content">
        {{ if $all_error }}
          <div id="all-error">
            {{ $all_error }}
          </div>
        {{ end }}
        {{ template "_sign" $mo }}
        {{ template "_attrs" $mo.Attrs }}
        {{ template "_thumb" $mo }}
        {{ template "_bimg" $mo }}
        {{ template "_user_roles" $mo }}
      </div>
      <div class="form-footer">
        <button class="form-btn" type="submit">{{ re "Save" }}</button>
        <a class="form-btn" href="{{ ro "users" }}">{{ re "Cancel" }}</a>
      </div>
    </form>
  </div>
{{ end }}
{{ define "scripts" }}
  <script src="/static/external/js/axios.js"></script>
  <script src="/static/external/cropper/cropper.min.js"></script>
  <script src="/static/js/elems/form_tabs.js"></script>
  <script src="/static/js/elems/img_box.js"></script>
  <script src="/static/js/elems/se_list.js"></script>
{{ end }}
